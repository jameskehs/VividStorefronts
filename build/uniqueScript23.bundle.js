"use strict";(self.webpackChunkvivid_storefronts=self.webpackChunkvivid_storefronts||[]).push([[9046],{1473:(e,t,n)=>{function o(){const e=document.getElementById("subPrice"),t=document.getElementById("taxPrice"),n=document.getElementById("grandPrice"),o=localStorage.getItem("discountedSubtotal"),a=localStorage.getItem("discountedTax"),i=localStorage.getItem("discountedTotal"),s=localStorage.getItem("promoDiscount");if(e&&t&&n&&(e.dataset.original||(e.dataset.original=e.textContent?.replace("$","").trim()||""),t.dataset.original||(t.dataset.original=t.textContent?.replace("$","").trim()||""),n.dataset.original||(n.dataset.original=n.textContent?.replace("$","").trim()||""),o&&a&&i&&s)){e.textContent=parseFloat(o).toFixed(2),t.textContent=parseFloat(a).toFixed(2),n.textContent=parseFloat(i).toFixed(2);const d=document.querySelector("#lineItems table");if(d&&!document.getElementById("discountRow")){const e=d.insertRow(3);e.id="discountRow";e.insertCell(0).textContent="Promo Discount:";const t=e.insertCell(1);t.innerHTML=`$<span id="promoDiscount">-${parseFloat(s).toFixed(2)}</span>`,t.style.textAlign="right"}}}n.d(t,{U:()=>o})},5817:(e,t,n)=>{function o(){if(!document.getElementById("page-blocker-overlay")){const e=document.createElement("div");e.id="page-blocker-overlay",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="rgba(0, 0, 0, 0.3)",e.style.zIndex="9998",e.style.display="none",document.body.appendChild(e)}const e=document.getElementById("page-blocker-overlay"),t=setInterval(()=>{const n=document.querySelector(".jq-toast-single");if(n&&n.textContent?.includes("The USPS database indicates your address is Residential")){e.style.display="block";const o=n.querySelector(".close-jq-toast-single");o&&o.remove(),n.innerHTML='\n        <strong class="sans red">Important Message</strong><br>\n        The USPS database indicates your address is Residential, but you have it flagged as Commercial.<br>\n        Please <a href="5-shipping.php" style="color: red; font-weight: bold; text-decoration: underline;">go back</a> and click the Verify Address button to ensure the most reliable package delivery.<br>\n        We verify all addresses with the USPS address database.\n      ',clearInterval(t)}},300)}n.d(t,{V:()=>o})},6045:(e,t,n)=>{n.r(t),n.d(t,{main:()=>c});var o=n(2507),a=n(7999);var i=n(1473),s=n(5817);const d="vivid-chat-style",r="vivid-chat-widget";function l(e={}){const t=e.apiBase??"/api/ai",n=e.business??function(){const e=location.host.toLowerCase();return e.includes("toasted")||e.includes("yolk")?"toastedyolk":e.includes("reginelli")?"reginellis":e.includes("shipley")?"shipleydonuts":e.includes("nola")?"nola":e.includes("vivid")?"vivid":void 0}(),o=e.siteName??(document.title||"Vivid Store"),a=document.querySelector('meta[name="vivid-chat-title"]')?.content,i=e.title??a??"Vivid Assistant",s=!!e.debug;!function(){if(document.getElementById(d))return;const e=`\n#${r} { position: fixed; z-index: 99999; right: 20px; bottom: 20px; font-family: Verdana, Arial, sans-serif; }\n#${r} .bubble { width: 56px; height: 56px; border-radius: 999px; box-shadow: 0 8px 24px rgba(0,0,0,.18); display:flex; align-items:center; justify-content:center; cursor:pointer; background: #111; color:#fff; }\n#${r} .panel { position: absolute; right: 0; bottom: 72px; width: 340px; max-height: 70vh; background: #fff; border-radius: 16px; box-shadow: 0 16px 40px rgba(0,0,0,.25); display:none; flex-direction:column; overflow:hidden; border:1px solid #e5e7eb; }\n#${r} .panel.open { display:flex; }\n#${r} header { padding: 10px 12px; border-bottom: 1px solid #f0f0f0; display:flex; align-items:center; justify-content:space-between; gap: 8px; }\n#${r} header .title { font-size: 14px; font-weight: 700; }\n#${r} header .brand { font-size: 12px; opacity:.85; }\n#${r} header button { all: unset; cursor:pointer; padding: 6px 8px; border-radius: 8px; }\n#${r} .log { padding: 10px 12px; display:flex; gap:8px; flex-direction:column; overflow:auto; }\n#${r} .msg { font-size: 13px; line-height: 1.35; padding: 8px 10px; border-radius: 10px; max-width: 85%; white-space: pre-wrap; }\n#${r} .msg.user { align-self: flex-end; background:#111; color:#fff; border-top-right-radius: 4px; }\n#${r} .msg.assistant { align-self: flex-start; background:#f6f6f7; color:#111; border-top-left-radius: 4px; }\n#${r} footer { border-top: 1px solid #f0f0f0; padding: 8px; display:flex; gap:6px; align-items: flex-end; }\n#${r} textarea { resize:none; flex:1; min-height:40px; max-height:140px; border:1px solid #ddd; border-radius:10px; padding:8px 10px; font-size:13px; }\n#${r} .send { background:#111; color:#fff; border:none; border-radius:10px; padding: 8px 12px; font-size:13px; cursor:pointer; }\n#${r} .hint { font-size: 11px; color:#6b7280; padding: 6px 12px 10px; }\n`,t=document.createElement("style");t.id=d,t.textContent=e,document.head.appendChild(t)}();let l=!1;const c=document.createElement("div");c.id=r;const p=document.createElement("button");p.className="bubble",p.title=i,p.innerHTML='\n<svg width="22" height="22" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">\n  <path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm-3 9H7a1 1 0 1 1 0-2h10a1 1 0 1 1 0 2zm0-4H7a1 1 0 1 1 0-2h10a1 1 0 1 1 0 2z"/>\n</svg>';const u=document.createElement("div");u.className="panel",u.setAttribute("role","dialog"),u.setAttribute("aria-label",i);const m=document.createElement("header"),g=document.createElement("div");g.style.display="flex",g.style.flexDirection="column",g.style.gap="2px";const x=document.createElement("div");x.className="title",x.textContent=i;const h=document.createElement("div");h.className="brand",h.textContent=o,g.appendChild(x),g.appendChild(h);const f=document.createElement("div"),y=document.createElement("button");y.ariaLabel="Close",y.innerHTML="✕",f.appendChild(y),m.appendChild(g),m.appendChild(f);const b=document.createElement("div");b.className="log";const C=document.createElement("footer"),v=document.createElement("textarea");v.placeholder="Type a message…",v.autocomplete="off";const E=document.createElement("button");function w(e){l=e,u.classList.toggle("open",l),l&&v.focus()}function I(e,t){const n=document.createElement("div");n.className=`msg ${e}`,n.textContent=t,b.appendChild(n),b.scrollTop=b.scrollHeight}async function S(){const e=v.value.trim();if(e){v.value="",I("user",e);try{const o=[{role:"user",content:e}],a=await async function(e,t,n,o){const a=await fetch(`${e}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({business:t,messages:n}),signal:o});if(!a.ok){const e=await a.text().catch(()=>"");throw new Error(`Chat error ${a.status}: ${e||a.statusText}`)}const i=await a.json();return String(i.message??"Sorry — I couldn’t get a response.")}({apiBase:t,business:n,messages:o});I("assistant",function(e){if("string"==typeof e)return e;if(null!==(t=e)&&"object"==typeof t){const t=[e.message,e.reply,e.content,e.text];for(const e of t)if("string"==typeof e&&e.trim())return e}var t;return"Thanks!"}(a))}catch(e){s&&console.error("chat error",e),I("assistant","Sorry — I had trouble reaching the server.")}}}E.className="send",E.type="button",E.textContent="Send",C.appendChild(v),C.appendChild(E),u.appendChild(m),u.appendChild(b),u.appendChild(C),c.appendChild(p),c.appendChild(u),document.body.appendChild(c),p.addEventListener("click",()=>w(!l)),y.addEventListener("click",()=>w(!1)),v.addEventListener("keydown",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())}),E.addEventListener("click",S)}function c(){function e(){if((a.U?.currentPage?.trim().toLowerCase()||"").includes("add to cart")||window.location.pathname.includes("/cart/3-edit.php")){const e=document.getElementById("productImage"),t=window.p?.artID;if(!e||!t)return;const n=window.location.origin,o=Date.now(),a=`${n}/catalog/gen/pdf_art_image.php?artID=${t}&nocache=${o}`;e.src.startsWith(`${n}/.cache`)&&(e.src=a,e.width=400,e.style.height="auto");const i=setInterval(()=>{e.src.startsWith(`${n}/.cache`)&&(e.src=a,e.width=400,e.style.height="auto")},300);setTimeout(()=>{clearInterval(i)},1e4)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),a.U.currentPage===o.c.CHECKOUTSHIPPING&&($("#continueTbl .smallbody").eq(1).html('<span class="red">*</span> Delivery time listed includes 1 to 2 days to process order plus shipping.\n      Please note we do not process orders on weekends or holidays.'),(0,s.V)()),a.U.currentPage===o.c.CHECKOUTCONFIRMATION&&(0,i.U)(),(a.U.currentPage===o.c.CHECKOUTPAYMENT||window.location.pathname.includes("/checkout/4-payment.php"))&&window.addEventListener("load",()=>{const e=document.getElementById("custPOBox"),t=document.getElementById("customerPO");if(!e||!t)return void console.warn("Missing #custPOBox or #customerPO");const n=e.querySelector("section");if(n){if(!document.getElementById("applyPromoCodeBtn")&&!document.getElementById("clearPromoCodeBtn")){const e=document.createElement("div");e.style.marginTop="8px",e.style.display="flex",e.style.justifyContent="center",e.style.gap="8px";const o=document.createElement("button");o.type="button",o.id="applyPromoCodeBtn",o.textContent="Apply Promo Code";const a=document.createElement("button");a.type="button",a.id="clearPromoCodeBtn",a.textContent="Clear",e.appendChild(o),e.appendChild(a),n.appendChild(e);const i={SAVE10:.1,SAVE20:.2,SAVE30:.3};o.addEventListener("click",()=>{const e=t.value.trim().toUpperCase(),n=i[e];if(!n)return void alert("Invalid promo code.");const o=document.getElementById("subPrice"),a=document.getElementById("taxPrice"),s=document.getElementById("grandPrice");if(!o||!a||!s)return;const d=parseFloat(o.dataset.original||o.textContent?.replace("$","")||"0");o.dataset.original||=d.toFixed(2);const r=+(d*(1-n)).toFixed(2),l=+(.105*r).toFixed(2),c=+(r+l).toFixed(2),p=+(d-r).toFixed(2);o.textContent=r.toFixed(2),a.textContent=l.toFixed(2),s.textContent=c.toFixed(2),localStorage.setItem("discountedSubtotal",r.toFixed(2)),localStorage.setItem("discountedTax",l.toFixed(2)),localStorage.setItem("discountedTotal",c.toFixed(2)),localStorage.setItem("promoDiscount",p.toFixed(2)),localStorage.setItem("promoCode",e);const u=document.querySelector("#lineItems table");if(u&&!document.getElementById("discountRow")){const e=u.insertRow(3);e.id="discountRow",e.insertCell(0).textContent="Promo Discount:";const t=e.insertCell(1);t.innerHTML=`$<span id="promoDiscount">-${p.toFixed(2)}</span>`,t.style.textAlign="right"}else{const e=document.getElementById("promoDiscount");e&&(e.textContent=`-${p.toFixed(2)}`)}}),a.addEventListener("click",()=>{localStorage.removeItem("discountedSubtotal"),localStorage.removeItem("discountedTax"),localStorage.removeItem("discountedTotal"),localStorage.removeItem("promoDiscount"),localStorage.removeItem("promoCode");const e=document.getElementById("discountRow");e&&e.remove();const n=document.getElementById("subPrice"),o=document.getElementById("taxPrice"),a=document.getElementById("grandPrice");n&&n.dataset.original&&(n.textContent=n.dataset.original),o&&o.dataset.original&&(o.textContent=o.dataset.original),a&&a.dataset.original&&(a.textContent=a.dataset.original),t.value=""})}}else console.warn("Could not find <section> inside #custPOBox")})}document.addEventListener("DOMContentLoaded",()=>{l({title:"Vivid Assistant",apiBase:"https://ai-chat-bot-1xm4.onrender.com/api/ai",debug:!0}),console.log("[VividChat] direct mount called")}),c(),function(){const e={HOME:"fa-home",CATALOG:"fa-book-open","MY ACCOUNT":"fa-user","SHOPPING CART":"fa-shopping-cart"},t=()=>{const n=document.querySelectorAll("#menu li");0!==n.length?n.forEach(t=>{const n=t.querySelector("a");if(n){const t=n.textContent?.trim().toUpperCase(),o=Object.keys(e).find(e=>t?.startsWith(e)),a=o?e[o]:"";if(a){const e=t?.match(/\((\d+)\)/)?.[1];n.innerHTML=`\n    <span class="icon-wrap">\n      <i class="fa ${a}"></i>\n      ${e?`<span class="badge">${e}</span>`:""}\n    </span>\n  `,n.setAttribute("title",t||"")}}}):setTimeout(t,200)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t()}()}}]);