{"version":3,"file":"uniqueScript15.bundle.js","mappings":"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","sources":["webpack://vivid-storefronts/./src/shared/BlockOnResidentialToast.ts","webpack://vivid-storefronts/./src/shared/persistDiscountedTotals.ts","webpack://vivid-storefronts/./src/store_scripts/ChestersApparel/index.ts"],"sourcesContent":["export function monitorResidentialToastAndBlockPage() {\n    if (!document.getElementById(\"page-blocker-overlay\")) {\n        const overlay = document.createElement(\"div\");\n        overlay.id = \"page-blocker-overlay\";\n        overlay.style.position = \"fixed\";\n        overlay.style.top = \"0\";\n        overlay.style.left = \"0\";\n        overlay.style.width = \"100vw\";\n        overlay.style.height = \"100vh\";\n        overlay.style.backgroundColor = \"rgba(0, 0, 0, 0.3)\";\n        overlay.style.zIndex = \"9998\";\n        overlay.style.display = \"none\";\n        document.body.appendChild(overlay);\n    }\n    const overlay = document.getElementById(\"page-blocker-overlay\");\n    const pollInterval = setInterval(() => {\n        const toast = document.querySelector(\".jq-toast-single\");\n        if (toast &&\n            toast.textContent?.includes(\"The USPS database indicates your address is Residential\")) {\n            overlay.style.display = \"block\";\n            // Remove the close (×) button\n            const closeBtn = toast.querySelector(\".close-jq-toast-single\");\n            if (closeBtn)\n                closeBtn.remove();\n            // Replace toast content with updated message and inline \"go back\" link\n            toast.innerHTML = `\n        <strong class=\"sans red\">Important Message</strong><br>\n        The USPS database indicates your address is Residential, but you have it flagged as Commercial.<br>\n        Please <a href=\"5-shipping.php\" style=\"color: red; font-weight: bold; text-decoration: underline;\">go back</a> and click the Verify Address button to ensure the most reliable package delivery.<br>\n        We verify all addresses with the USPS address database.\n      `;\n            clearInterval(pollInterval);\n        }\n    }, 300);\n}\n","export function persistDiscountedTotals() {\n    const subPrice = document.getElementById(\"subPrice\");\n    const taxPrice = document.getElementById(\"taxPrice\");\n    const grandPrice = document.getElementById(\"grandPrice\");\n    const storedSubtotal = localStorage.getItem(\"discountedSubtotal\");\n    const storedTax = localStorage.getItem(\"discountedTax\");\n    const storedTotal = localStorage.getItem(\"discountedTotal\");\n    const storedDiscount = localStorage.getItem(\"promoDiscount\");\n    if (!subPrice || !taxPrice || !grandPrice)\n        return;\n    // Store original values if not already stored\n    if (!subPrice.dataset.original) {\n        subPrice.dataset.original =\n            subPrice.textContent?.replace(\"$\", \"\").trim() || \"\";\n    }\n    if (!taxPrice.dataset.original) {\n        taxPrice.dataset.original =\n            taxPrice.textContent?.replace(\"$\", \"\").trim() || \"\";\n    }\n    if (!grandPrice.dataset.original) {\n        grandPrice.dataset.original =\n            grandPrice.textContent?.replace(\"$\", \"\").trim() || \"\";\n    }\n    if (storedSubtotal && storedTax && storedTotal && storedDiscount) {\n        subPrice.textContent = parseFloat(storedSubtotal).toFixed(2);\n        taxPrice.textContent = parseFloat(storedTax).toFixed(2);\n        grandPrice.textContent = parseFloat(storedTotal).toFixed(2);\n        // Inject the promo discount row if not already present\n        const lineItemsTable = document.querySelector(\"#lineItems table\");\n        if (lineItemsTable && !document.getElementById(\"discountRow\")) {\n            const row = lineItemsTable.insertRow(3); // Adjust this index if needed\n            row.id = \"discountRow\";\n            const cell1 = row.insertCell(0);\n            cell1.textContent = \"Promo Discount:\";\n            const cell2 = row.insertCell(1);\n            cell2.innerHTML = `$<span id=\"promoDiscount\">-${parseFloat(storedDiscount).toFixed(2)}</span>`;\n            cell2.style.textAlign = \"right\";\n        }\n    }\n}\n","import { StorefrontPage } from \"../../enums/StorefrontPage.enum\";\nimport { GLOBALVARS } from \"../../index\";\nimport { persistDiscountedTotals } from \"../../shared/persistDiscountedTotals\";\nimport { monitorResidentialToastAndBlockPage } from \"../../shared/BlockOnResidentialToast\";\nexport function main() {\n    function init() {\n        const isAddToCartPage = () => {\n            const page = GLOBALVARS?.currentPage?.trim().toLowerCase() || \"\";\n            return (page.includes(\"add to cart\") ||\n                window.location.pathname.includes(\"/cart/3-edit.php\"));\n        };\n        if (isAddToCartPage()) {\n            const img = document.getElementById(\"productImage\");\n            const artID = window.p?.artID;\n            if (!img || !artID)\n                return;\n            const origin = window.location.origin;\n            const uniqueNoCache = Date.now();\n            const desiredURL = `${origin}/catalog/gen/pdf_art_image.php?artID=${artID}&nocache=${uniqueNoCache}`;\n            // Only replace if it's the old thumbnail\n            if (img.src.startsWith(`${origin}/.cache`)) {\n                img.src = desiredURL;\n                img.width = 400;\n                img.style.height = \"auto\";\n            }\n            // Watch for AJAX overwrites for a short time\n            const interval = setInterval(() => {\n                if (img.src.startsWith(`${origin}/.cache`)) {\n                    img.src = desiredURL;\n                    img.width = 400;\n                    img.style.height = \"auto\";\n                }\n            }, 300);\n            // Stop checking after 10 seconds\n            setTimeout(() => {\n                clearInterval(interval);\n            }, 10000);\n        }\n        // ===== CART BANNER (single-insert + positioned under login bar) =====\n        if (GLOBALVARS.currentPage === StorefrontPage.CART) {\n            const ensureCartBanner = () => {\n                // If already inserted, stop.\n                if (document.getElementById(\"cart-guidance-banner\"))\n                    return true;\n                // Find the first .tableMain (this sits just below the login bar in your markup)\n                const tableMain = document.querySelector(\".tableMain\");\n                if (!tableMain)\n                    return false; // not ready yet\n                // Build the banner\n                const banner = document.createElement(\"div\");\n                banner.id = \"cart-guidance-banner\";\n                banner.setAttribute(\"role\", \"status\");\n                banner.style.background = \"#fff\";\n                banner.style.color = \"#ff0000ff\";\n                banner.style.padding = \"10px\";\n                banner.style.textAlign = \"center\";\n                banner.style.fontWeight = \"bold\";\n                banner.style.border = \"1px solid transparent\";\n                banner.style.margin = \"8px 0\";\n                banner.style.fontSize = \"1.4em\";\n                // Message text (change as needed)\n                banner.textContent =\n                    \"Budget Guidance: $450 limit for new employees. $250/year for existing employees.\";\n                // Insert directly before .tableMain (i.e., below the login bar)\n                const parent = tableMain.parentElement || tableMain;\n                parent.insertBefore(banner, tableMain);\n                return true;\n            };\n            // Try immediately, then retry briefly in case layout scripts render late\n            let attempts = 0;\n            const tryInsert = () => {\n                if (ensureCartBanner())\n                    return;\n                if (++attempts < 25)\n                    setTimeout(tryInsert, 150);\n            };\n            tryInsert();\n        }\n        // ===================================================================\n    }\n    if (document.readyState === \"loading\") {\n        document.addEventListener(\"DOMContentLoaded\", init);\n    }\n    else {\n        init();\n    }\n    if (GLOBALVARS.currentPage === StorefrontPage.CHECKOUTSHIPPING) {\n        $(\"#continueTbl .smallbody\")\n            .eq(1)\n            .html(`<span class=\"red\">*</span> Delivery time listed includes 1 to 2 days to process order plus shipping.\n      Please note we do not process orders on weekends or holidays.`);\n        monitorResidentialToastAndBlockPage();\n    }\n    if (GLOBALVARS.currentPage === StorefrontPage.CHECKOUTCONFIRMATION) {\n        persistDiscountedTotals();\n    }\n    if (GLOBALVARS.currentPage === StorefrontPage.CHECKOUTPAYMENT ||\n        window.location.pathname.includes(\"/checkout/4-payment.php\")) {\n        // (intentionally blank)\n    }\n}\nmain();\nfunction convertMenuTextToIcons() {\n    const iconMap = {\n        HOME: \"fa-home\",\n        CATALOG: \"fa-book-open\",\n        \"MY ACCOUNT\": \"fa-user\",\n        \"SHOPPING CART\": \"fa-shopping-cart\",\n    };\n    const tryConvert = () => {\n        const menuItems = document.querySelectorAll(\"#menu li\");\n        if (menuItems.length === 0) {\n            setTimeout(tryConvert, 200);\n            return;\n        }\n        menuItems.forEach((item) => {\n            const link = item.querySelector(\"a\");\n            if (link) {\n                const rawText = link.textContent?.trim().toUpperCase();\n                const matchedKey = Object.keys(iconMap).find((key) => rawText?.startsWith(key));\n                const iconClass = matchedKey ? iconMap[matchedKey] : \"\";\n                // ✅ Override the CATALOG link's href\n                if (matchedKey === \"CATALOG\") {\n                    link.setAttribute(\"href\", \"/catalog/?g=3829&y=9146\");\n                }\n                if (iconClass) {\n                    const countMatch = rawText?.match(/\\((\\d+)\\)/)?.[1];\n                    link.innerHTML = `\n            <span class=\"icon-wrap\">\n              <i class=\"fa ${iconClass}\"></i>\n              ${countMatch ? `<span class=\"badge\">${countMatch}</span>` : \"\"}\n            </span>\n          `;\n                    link.setAttribute(\"title\", rawText || \"\");\n                }\n            }\n        });\n    };\n    document.readyState === \"loading\"\n        ? document.addEventListener(\"DOMContentLoaded\", tryConvert)\n        : tryConvert();\n}\nconvertMenuTextToIcons();\n"],"names":["monitorResidentialToastAndBlockPage","document","getElementById","overlay","createElement","id","style","position","top","left","width","height","backgroundColor","zIndex","display","body","appendChild","pollInterval","setInterval","toast","querySelector","textContent","includes","closeBtn","remove","innerHTML","clearInterval","persistDiscountedTotals","subPrice","taxPrice","grandPrice","storedSubtotal","localStorage","getItem","storedTax","storedTotal","storedDiscount","dataset","original","replace","trim","parseFloat","toFixed","lineItemsTable","row","insertRow","insertCell","cell2","textAlign","main","init","currentPage","toLowerCase","window","location","pathname","img","artID","p","origin","uniqueNoCache","Date","now","desiredURL","src","startsWith","interval","setTimeout","CART","ensureCartBanner","tableMain","banner","setAttribute","background","color","padding","fontWeight","border","margin","fontSize","parentElement","insertBefore","attempts","tryInsert","readyState","addEventListener","CHECKOUTSHIPPING","$","eq","html","CHECKOUTCONFIRMATION","CHECKOUTPAYMENT","iconMap","HOME","CATALOG","tryConvert","menuItems","querySelectorAll","length","forEach","item","link","rawText","toUpperCase","matchedKey","Object","keys","find","key","iconClass","countMatch","match","convertMenuTextToIcons"],"sourceRoot":""}